<?php /* Smarty version Smarty-3.1.7, created on 2018-08-17 12:37:51
         compiled from "/var/www/html/BMLGDEMO65/includes/runtime/../../layouts/vlayout/modules/ProcessFlow/EditViewBlocksProcessFlowEdit.tpl" */ ?>
<?php /*%%SmartyHeaderCode:8901096345b7338f454d772-59043823%%*/if(!defined('SMARTY_DIR')) exit('no direct access allowed');
$_valid = $_smarty_tpl->decodeProperties(array (
  'file_dependency' => 
  array (
    '13f5d57e1ec2b1b2fe0ca874a626b81d4072d12c' => 
    array (
      0 => '/var/www/html/BMLGDEMO65/includes/runtime/../../layouts/vlayout/modules/ProcessFlow/EditViewBlocksProcessFlowEdit.tpl',
      1 => 1534508869,
      2 => 'file',
    ),
  ),
  'nocache_hash' => '8901096345b7338f454d772-59043823',
  'function' => 
  array (
  ),
  'version' => 'Smarty-3.1.7',
  'unifunc' => 'content_5b7338f49430f',
  'variables' => 
  array (
    'PROCESS_MASTER_DATA' => 0,
    'CURRENT_TIME' => 0,
    'CURRENT_USER_MODEL' => 0,
    'pid' => 0,
    'process_instance_list' => 0,
    'process_instance_data' => 0,
    'ps' => 0,
    'style' => 0,
    'pdata' => 0,
    'process_Block_list' => 0,
    'PROCESSFLOW_MODEL' => 0,
    'MINITS' => 0,
    'ENDTIME' => 0,
    'roleid' => 0,
    'auserid' => 0,
    'ausername' => 0,
    'userid' => 0,
    'branching_processids' => 0,
    'branching_process_id' => 0,
    'RECORD_ID' => 0,
    'pstatus' => 0,
    'ALLCOMPLETED' => 0,
    'pname' => 0,
    'COMPLETED' => 0,
    'decision_processids' => 0,
    'decision_processid' => 0,
    'customform' => 0,
    'unit_instance_data' => 0,
    'cdata' => 0,
    'MODULE' => 0,
  ),
  'has_nocache_code' => false,
),false); /*/%%SmartyHeaderCode%%*/?>
<?php if ($_valid && !is_callable('content_5b7338f49430f')) {function content_5b7338f49430f($_smarty_tpl) {?><style>.bold { color:#000!important; }.ui-dform-div label{display: table-cell;float: left;margin-right: 21px;margin-bottom: 0px;width: 85%;}.ui-dform-div{margin-bottom:10px;}.commentscontainer {border: 2px solid #dedede;border-radius: 5px;padding: 10px;margin: 10px 0;}.darker {border-color: #ccc;}.commentscontainer::after {content: "";clear: both;display: table;}.commentscontainer img {float: left;max-width: 60px;width: 40px;height: 33px;margin-right: 10px;border-radius: 50%;}.commentscontainer img.right {float: right;margin-left: 30px;margin-right: -7px;margin-top: 26px;}.darker h4{float: right;margin-left: -34px;margin-bottom: 43px;display: block;}.time-right {float: right;color: #aaa;}.time-left {float: left;color: #999;}.savecomment{position: relative;left: 87%;top: 4px;}.commentspanel{float: right;margin-left: 13px;min-width: 343px;width: 68%;}</style><input type='hidden' id='idHdnTotalTaskCompleted' value="<?php echo $_smarty_tpl->tpl_vars['PROCESS_MASTER_DATA']->value['total_completed_tasks'];?>
"><input type='hidden' id='idHdnTotalTaskNotCompleted' value="<?php echo $_smarty_tpl->tpl_vars['PROCESS_MASTER_DATA']->value['total_not_started_tasks'];?>
"><input type='hidden' id='idHdnElapsedTime' value="<?php echo $_smarty_tpl->tpl_vars['PROCESS_MASTER_DATA']->value['process_destails']['elapsed_time'];?>
"><input type='hidden' id='idHdnCurrentTask' value="<?php echo $_smarty_tpl->tpl_vars['PROCESS_MASTER_DATA']->value['current_task'];?>
"><input type='hidden' id='idHdnTotalTasks' value="<?php echo $_smarty_tpl->tpl_vars['PROCESS_MASTER_DATA']->value['total_tasks'];?>
"><input type='hidden' id='idHdnTotalWaitingTasks' value="<?php echo $_smarty_tpl->tpl_vars['PROCESS_MASTER_DATA']->value['total_tasks_Waiting'];?>
"><input type='hidden' id='idHdnTerminationStatus' value="<?php echo $_smarty_tpl->tpl_vars['PROCESS_MASTER_DATA']->value['termination_status'];?>
"><input type='hidden' id='idHdnCurrentTime' value="<?php echo $_smarty_tpl->tpl_vars['CURRENT_TIME']->value;?>
"><?php $_smarty_tpl->tpl_vars["roleid"] = new Smarty_variable($_smarty_tpl->tpl_vars['CURRENT_USER_MODEL']->value->get('roleid'), null, 0);?><?php $_smarty_tpl->tpl_vars["userid"] = new Smarty_variable($_smarty_tpl->tpl_vars['CURRENT_USER_MODEL']->value->get('id'), null, 0);?><input type='hidden' id='idHdnProcessmasterid' value='<?php echo $_smarty_tpl->tpl_vars['PROCESS_MASTER_DATA']->value['process_master_id'];?>
'><?php $_smarty_tpl->tpl_vars['process_Block_list'] = new Smarty_variable($_smarty_tpl->tpl_vars['PROCESS_MASTER_DATA']->value['process_Block_list'], null, 0);?><input type="hidden" id="idHdnSoundNotifications" value="<?php echo $_smarty_tpl->tpl_vars['PROCESS_MASTER_DATA']->value['sound_notifications'];?>
"><input type="hidden" id="idHdnHelpDetails" value="<?php echo $_smarty_tpl->tpl_vars['PROCESS_MASTER_DATA']->value['help_details'];?>
"><div class="accordion" id="accordion2"><?php  $_smarty_tpl->tpl_vars['pdata'] = new Smarty_Variable; $_smarty_tpl->tpl_vars['pdata']->_loop = false;
 $_smarty_tpl->tpl_vars['pid'] = new Smarty_Variable;
 $_from = $_smarty_tpl->tpl_vars['PROCESS_MASTER_DATA']->value['process_list']; if (!is_array($_from) && !is_object($_from)) { settype($_from, 'array');}
foreach ($_from as $_smarty_tpl->tpl_vars['pdata']->key => $_smarty_tpl->tpl_vars['pdata']->value){
$_smarty_tpl->tpl_vars['pdata']->_loop = true;
 $_smarty_tpl->tpl_vars['pid']->value = $_smarty_tpl->tpl_vars['pdata']->key;
?><?php $_smarty_tpl->tpl_vars['process_instance_list'] = new Smarty_variable($_smarty_tpl->tpl_vars['PROCESS_MASTER_DATA']->value['process_instance_list'], null, 0);?><?php $_smarty_tpl->tpl_vars['process_instance_data'] = new Smarty_variable($_smarty_tpl->tpl_vars['process_instance_list']->value[$_smarty_tpl->tpl_vars['pid']->value], null, 0);?><?php $_smarty_tpl->tpl_vars["ps"] = new Smarty_variable($_smarty_tpl->tpl_vars['process_instance_data']->value['process_status'], null, 0);?><?php $_smarty_tpl->tpl_vars["style"] = new Smarty_variable('', null, 0);?><?php if ($_smarty_tpl->tpl_vars['ps']->value==1){?><?php $_smarty_tpl->tpl_vars["style"] = new Smarty_variable("font-size: 20px;color: #f89406;border: 4px solid #f89406;border-radius: 5px;", null, 0);?><?php }elseif($_smarty_tpl->tpl_vars['ps']->value==2){?><?php $_smarty_tpl->tpl_vars["style"] = new Smarty_variable("font-size: 20px;color: #356635;border: 4px solid #356635;border-radius: 5px;", null, 0);?><?php }elseif($_smarty_tpl->tpl_vars['ps']->value==3){?><?php $_smarty_tpl->tpl_vars["style"] = new Smarty_variable("font-size: 20px;color: #49afcd;border: 4px solid #49afcd;border-radius: 5px;", null, 0);?><?php }elseif($_smarty_tpl->tpl_vars['ps']->value==4){?><?php $_smarty_tpl->tpl_vars["style"] = new Smarty_variable("font-size: 20px;color: #0088cc;border: 4px solid #0088cc;border-radius: 5px;", null, 0);?><?php }elseif($_smarty_tpl->tpl_vars['ps']->value==5){?><?php $_smarty_tpl->tpl_vars["style"] = new Smarty_variable("font-size: 20px;color: #f44336;border: 4px solid #f44336;border-radius: 5px;", null, 0);?><?php }?><div class="accordion-group"><div class="accordion-heading"><a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapse_<?php echo $_smarty_tpl->tpl_vars['pid']->value;?>
" style="<?php echo $_smarty_tpl->tpl_vars['style']->value;?>
" id="idMedia_<?php echo $_smarty_tpl->tpl_vars['pid']->value;?>
"><img src="assets/icons/<?php if ($_smarty_tpl->tpl_vars['pdata']->value['customicon']==null){?><?php echo $_smarty_tpl->tpl_vars['process_Block_list']->value[$_smarty_tpl->tpl_vars['pdata']->value['blocktype']];?>
<?php }else{ ?><?php echo $_smarty_tpl->tpl_vars['pdata']->value['customicon'];?>
<?php }?>"  style='width:30px;' /><strong > <?php echo $_smarty_tpl->tpl_vars['pdata']->value['description'];?>
<br></strong></a></div><div id="collapse_<?php echo $_smarty_tpl->tpl_vars['pid']->value;?>
" class="accordion-body collapse <?php if ($_smarty_tpl->tpl_vars['ps']->value==1||$_smarty_tpl->tpl_vars['ps']->value==3||$_smarty_tpl->tpl_vars['ps']->value==4){?>in<?php }?>"><div class="accordion-inner"><table width="100%" style="border:0px solid gray;"><tr><td width='' class="span3"><?php $_smarty_tpl->tpl_vars['MINITS'] = new Smarty_variable($_smarty_tpl->tpl_vars['PROCESSFLOW_MODEL']->value->getHoursMints($_smarty_tpl->tpl_vars['pdata']->value['unitprocess_time']), null, 0);?><p class='bold'>Process Time(HH:MM) : <?php echo $_smarty_tpl->tpl_vars['MINITS']->value;?>
</p><?php if ($_smarty_tpl->tpl_vars['ps']->value!=''){?><p class='bold'>Start Time : <?php echo $_smarty_tpl->tpl_vars['process_instance_data']->value['start_time'];?>
</p><?php }?><?php if ($_smarty_tpl->tpl_vars['ps']->value==2){?><p class='bold'>End Time : <?php if ($_smarty_tpl->tpl_vars['process_instance_data']->value['end_time']!='0000-00-00 00:00:00'){?><?php echo $_smarty_tpl->tpl_vars['process_instance_data']->value['end_time'];?>
<?php }?> </p><?php }?><?php if ($_smarty_tpl->tpl_vars['ps']->value==1||$_smarty_tpl->tpl_vars['ps']->value==3){?><?php $_smarty_tpl->tpl_vars['ENDTIME'] = new Smarty_variable($_smarty_tpl->tpl_vars['PROCESSFLOW_MODEL']->value->getEndTime($_smarty_tpl->tpl_vars['process_instance_data']->value['start_time'],$_smarty_tpl->tpl_vars['pdata']->value['unitprocess_time']), null, 0);?><input type="hidden" id="idHdnCurrentProcessId" value="<?php echo $_smarty_tpl->tpl_vars['pid']->value;?>
" ><input type="hidden" id="idHdnCurrentProcessEndTime" value="<?php echo $_smarty_tpl->tpl_vars['ENDTIME']->value;?>
" ><p class='bold'>Remaining Time(HH:MM) : <span id="idHdnCurrentProcessRemainingTime" class="label label-default"></span></p><?php }?><?php if ($_smarty_tpl->tpl_vars['roleid']->value==$_smarty_tpl->tpl_vars['PROCESS_MASTER_DATA']->value['assigne_role']&&($_smarty_tpl->tpl_vars['ps']->value==''||$_smarty_tpl->tpl_vars['ps']->value==1||$_smarty_tpl->tpl_vars['ps']->value==3)){?><p class='bold' >Assigned User: <select class="chzn-select clsSelAssgnee" data-unitprocessid='<?php echo $_smarty_tpl->tpl_vars['pid']->value;?>
' ><option >Select Assigne</option><?php  $_smarty_tpl->tpl_vars['ausername'] = new Smarty_Variable; $_smarty_tpl->tpl_vars['ausername']->_loop = false;
 $_smarty_tpl->tpl_vars['auserid'] = new Smarty_Variable;
 $_from = $_smarty_tpl->tpl_vars['PROCESS_MASTER_DATA']->value['assigne_users']; if (!is_array($_from) && !is_object($_from)) { settype($_from, 'array');}
foreach ($_from as $_smarty_tpl->tpl_vars['ausername']->key => $_smarty_tpl->tpl_vars['ausername']->value){
$_smarty_tpl->tpl_vars['ausername']->_loop = true;
 $_smarty_tpl->tpl_vars['auserid']->value = $_smarty_tpl->tpl_vars['ausername']->key;
?><option value="<?php echo $_smarty_tpl->tpl_vars['auserid']->value;?>
" data-user="<?php echo $_smarty_tpl->tpl_vars['ausername']->value['user_name'];?>
" <?php if ($_smarty_tpl->tpl_vars['ausername']->value['user_name']==$_smarty_tpl->tpl_vars['pdata']->value['assignedto']){?> selected <?php }?> ><?php echo $_smarty_tpl->tpl_vars['ausername']->value['fullname'];?>
</option><?php } ?></select></p><?php }else{ ?><p class='bold'>Assigned to: <b><?php echo $_smarty_tpl->tpl_vars['pdata']->value['assignedto'];?>
</b></p><?php }?></td><td width='' class="span3"><p class="clsPLrnMode"><?php if (empty($_smarty_tpl->tpl_vars['pdata']->value['learnermodedetails'])){?> <?php }else{ ?><b>Details :</b> <?php echo $_smarty_tpl->tpl_vars['pdata']->value['learnermodedetails'];?>
<?php }?></p><?php if (($_smarty_tpl->tpl_vars['userid']->value==$_smarty_tpl->tpl_vars['PROCESS_MASTER_DATA']->value['assignee_data'][$_smarty_tpl->tpl_vars['pid']->value]||$_smarty_tpl->tpl_vars['userid']->value==$_smarty_tpl->tpl_vars['PROCESS_MASTER_DATA']->value['created_by']||$_smarty_tpl->tpl_vars['roleid']->value==$_smarty_tpl->tpl_vars['PROCESS_MASTER_DATA']->value['supervisor_roleid'])&&$_smarty_tpl->tpl_vars['PROCESS_MASTER_DATA']->value['termination_status']!='Aborted'){?><form id="myform<?php echo $_smarty_tpl->tpl_vars['pid']->value;?>
" name="myform<?php echo $_smarty_tpl->tpl_vars['pid']->value;?>
"></form><!-- 0 - Not yet; 1 - started; 2 - completed; 3 - interrupted;--><?php if ($_smarty_tpl->tpl_vars['PROCESS_MASTER_DATA']->value['termination_status']=='Aborted'){?><?php }elseif($_smarty_tpl->tpl_vars['pdata']->value['blocktype']==11){?><?php $_smarty_tpl->tpl_vars["branching_processids"] = new Smarty_variable(explode(",",$_smarty_tpl->tpl_vars['pdata']->value['post_unitprocess']), null, 0);?><?php $_smarty_tpl->tpl_vars['ALLCOMPLETED'] = new Smarty_variable(true, null, 0);?><?php  $_smarty_tpl->tpl_vars['branching_process_id'] = new Smarty_Variable; $_smarty_tpl->tpl_vars['branching_process_id']->_loop = false;
 $_from = $_smarty_tpl->tpl_vars['branching_processids']->value; if (!is_array($_from) && !is_object($_from)) { settype($_from, 'array');}
foreach ($_from as $_smarty_tpl->tpl_vars['branching_process_id']->key => $_smarty_tpl->tpl_vars['branching_process_id']->value){
$_smarty_tpl->tpl_vars['branching_process_id']->_loop = true;
?><?php if ($_smarty_tpl->tpl_vars['branching_process_id']->value>0){?><?php $_smarty_tpl->tpl_vars['pstatus'] = new Smarty_variable($_smarty_tpl->tpl_vars['PROCESSFLOW_MODEL']->value->getProcessStatus($_smarty_tpl->tpl_vars['branching_process_id']->value,$_smarty_tpl->tpl_vars['RECORD_ID']->value), null, 0);?><?php if ($_smarty_tpl->tpl_vars['pstatus']->value==1||$_smarty_tpl->tpl_vars['pstatus']->value==3||$_smarty_tpl->tpl_vars['pstatus']->value==4){?><?php $_smarty_tpl->tpl_vars['ALLCOMPLETED'] = new Smarty_variable(false, null, 0);?><?php }?><?php }?><?php } ?><?php if (($_smarty_tpl->tpl_vars['ps']->value==1||$_smarty_tpl->tpl_vars['ps']->value==3)&&$_smarty_tpl->tpl_vars['ALLCOMPLETED']->value==true){?><button data-nextprocess="<?php echo $_smarty_tpl->tpl_vars['pdata']->value['next_process'];?>
" class='btn btn-warning btn-xs endprocess' data-unitprocessid='<?php echo $_smarty_tpl->tpl_vars['pid']->value;?>
' data-name='<?php echo $_smarty_tpl->tpl_vars['pdata']->value['description'];?>
' type='button' data-lmd = '<?php echo $_smarty_tpl->tpl_vars['pdata']->value['learnermodedetails'];?>
'  data-assignedto=<?php echo $_smarty_tpl->tpl_vars['pdata']->value['assignedto'];?>
 ><?php if ($_smarty_tpl->tpl_vars['pdata']->value['next_process']=='0'){?>Finish<?php }else{ ?>Next<?php }?></button><?php }?><?php if ($_smarty_tpl->tpl_vars['ps']->value==2){?><?php if ($_smarty_tpl->tpl_vars['PROCESS_MASTER_DATA']->value['process_destails']['operating_mode']=='Relaxed'){?>&nbsp;<button class='btn btn-danger  btn-xs updateProcessData' type='button'   data-unitprocessid='<?php echo $_smarty_tpl->tpl_vars['pid']->value;?>
' data-name='<?php echo $_smarty_tpl->tpl_vars['pdata']->value['description'];?>
' data-assignedto=<?php echo $_smarty_tpl->tpl_vars['pdata']->value['assignedto'];?>
>Update</button><?php }?><?php }?><?php }elseif($_smarty_tpl->tpl_vars['pdata']->value['blocktype']==9){?><?php if ($_smarty_tpl->tpl_vars['ps']->value==1||$_smarty_tpl->tpl_vars['ps']->value==3||$_smarty_tpl->tpl_vars['ps']->value==4){?><img src="assets/icons/branching.png"><?php $_smarty_tpl->tpl_vars["branching_processids"] = new Smarty_variable(explode(",",$_smarty_tpl->tpl_vars['pdata']->value['post_unitprocess']), null, 0);?><?php  $_smarty_tpl->tpl_vars['branching_process_id'] = new Smarty_Variable; $_smarty_tpl->tpl_vars['branching_process_id']->_loop = false;
 $_from = $_smarty_tpl->tpl_vars['branching_processids']->value; if (!is_array($_from) && !is_object($_from)) { settype($_from, 'array');}
foreach ($_from as $_smarty_tpl->tpl_vars['branching_process_id']->key => $_smarty_tpl->tpl_vars['branching_process_id']->value){
$_smarty_tpl->tpl_vars['branching_process_id']->_loop = true;
?><?php if ($_smarty_tpl->tpl_vars['branching_process_id']->value>0){?><?php $_smarty_tpl->tpl_vars['pstatus'] = new Smarty_variable($_smarty_tpl->tpl_vars['PROCESSFLOW_MODEL']->value->getProcessStatus($_smarty_tpl->tpl_vars['branching_process_id']->value,$_smarty_tpl->tpl_vars['RECORD_ID']->value), null, 0);?><?php $_smarty_tpl->tpl_vars['pname'] = new Smarty_variable($_smarty_tpl->tpl_vars['PROCESS_MASTER_DATA']->value['process_list'][$_smarty_tpl->tpl_vars['branching_process_id']->value]['description'], null, 0);?><?php $_smarty_tpl->tpl_vars['COMPLETED'] = new Smarty_variable(true, null, 0);?><?php if ($_smarty_tpl->tpl_vars['pstatus']->value==4){?><button title='Waiting' class='btn btn-info btn-xs btnClsBranching' data-unitprocessid='<?php echo $_smarty_tpl->tpl_vars['pid']->value;?>
' type='button' data-runningprocess="<?php echo $_smarty_tpl->tpl_vars['branching_process_id']->value;?>
" data-assignedto="<?php echo $_smarty_tpl->tpl_vars['pdata']->value['assignedto'];?>
"  data-branchids="<?php echo $_smarty_tpl->tpl_vars['pdata']->value['post_unitprocess'];?>
"><?php echo $_smarty_tpl->tpl_vars['pname']->value;?>
</button>&nbsp;<?php $_smarty_tpl->tpl_vars['COMPLETED'] = new Smarty_variable(false, null, 0);?><?php }elseif($_smarty_tpl->tpl_vars['pstatus']->value==1||$_smarty_tpl->tpl_vars['pstatus']->value==3){?><button title='Running' class='btn btn-warning btn-xs' data-assignedto=<?php echo $_smarty_tpl->tpl_vars['pdata']->value['assignedto'];?>
 data-unitprocessid='<?php echo $_smarty_tpl->tpl_vars['pid']->value;?>
' type='button' data-runningprocess="<?php echo $_smarty_tpl->tpl_vars['branching_process_id']->value;?>
" data-branchids="<?php echo $_smarty_tpl->tpl_vars['pdata']->value['post_unitprocess'];?>
" disabled ><?php echo $_smarty_tpl->tpl_vars['pname']->value;?>
</button>&nbsp;<?php $_smarty_tpl->tpl_vars['COMPLETED'] = new Smarty_variable(false, null, 0);?><?php }elseif($_smarty_tpl->tpl_vars['pstatus']->value==2){?><button title='completed' class='btn btn-success btn-xs' type='button' disabled><?php echo $_smarty_tpl->tpl_vars['pname']->value;?>
</button>&nbsp;<?php }else{ ?><?php $_smarty_tpl->tpl_vars['COMPLETED'] = new Smarty_variable(false, null, 0);?><button title='Run Process' class='btn btn-info btn-xs btnClsBranching' data-assignedto=<?php echo $_smarty_tpl->tpl_vars['pdata']->value['assignedto'];?>
 data-unitprocessid='<?php echo $_smarty_tpl->tpl_vars['pid']->value;?>
' type='button' data-runningprocess="<?php echo $_smarty_tpl->tpl_vars['branching_process_id']->value;?>
" data-branchids="<?php echo $_smarty_tpl->tpl_vars['pdata']->value['post_unitprocess'];?>
"><?php echo $_smarty_tpl->tpl_vars['pname']->value;?>
</button>&nbsp;<?php }?><?php }?><?php } ?><?php if ($_smarty_tpl->tpl_vars['COMPLETED']->value==true&&$_smarty_tpl->tpl_vars['ps']->value==4){?><?php $_smarty_tpl->tpl_vars['psforupdate'] = new Smarty_variable($_smarty_tpl->tpl_vars['PROCESSFLOW_MODEL']->value->updateProcessStatus($_smarty_tpl->tpl_vars['pid']->value,$_smarty_tpl->tpl_vars['RECORD_ID']->value), null, 0);?><?php }?><?php }?><?php }elseif($_smarty_tpl->tpl_vars['pdata']->value['blocktype']==10){?><?php if ($_smarty_tpl->tpl_vars['ps']->value==1||$_smarty_tpl->tpl_vars['ps']->value==3){?><button class='btn btn-success btn-xs btnClsDecision' data-unitprocessid='<?php echo $_smarty_tpl->tpl_vars['pid']->value;?>
' data-name='<?php echo $_smarty_tpl->tpl_vars['pdata']->value['description'];?>
' type='button' data-postprocess="<?php echo $_smarty_tpl->tpl_vars['pdata']->value['post_unitprocess'];?>
" data-assignedto=<?php echo $_smarty_tpl->tpl_vars['pdata']->value['assignedto'];?>
 data-decision='yes'>Yes</button><!--<button class='btn btn-warning btn-xs btnClsDecision' data-unitprocessid='<?php echo $_smarty_tpl->tpl_vars['pid']->value;?>
' data-name='<?php echo $_smarty_tpl->tpl_vars['pdata']->value['description'];?>
' type='button' data-postprocess="<?php echo $_smarty_tpl->tpl_vars['pdata']->value['post_unitprocess'];?>
" data-decision='no'>No</button>--><button class='btn btn-warning btn-xs' type='button'   data-decision='no'>No</button><?php }?><?php if ($_smarty_tpl->tpl_vars['ps']->value==2){?><?php if ($_smarty_tpl->tpl_vars['PROCESS_MASTER_DATA']->value['process_destails']['operating_mode']=='Relaxed'){?>&nbsp;<button class='btn btn-danger  btn-xs updateProcessData' type='button'   data-unitprocessid='<?php echo $_smarty_tpl->tpl_vars['pid']->value;?>
' data-name='<?php echo $_smarty_tpl->tpl_vars['pdata']->value['description'];?>
' data-assignedto=<?php echo $_smarty_tpl->tpl_vars['pdata']->value['assignedto'];?>
 >Update</button><?php }?><?php }?><?php }elseif($_smarty_tpl->tpl_vars['pdata']->value['blocktype']==2){?><?php $_smarty_tpl->tpl_vars["decision_processids"] = new Smarty_variable(explode(",",$_smarty_tpl->tpl_vars['pdata']->value['post_unitprocess']), null, 0);?><?php  $_smarty_tpl->tpl_vars['decision_processid'] = new Smarty_Variable; $_smarty_tpl->tpl_vars['decision_processid']->_loop = false;
 $_from = $_smarty_tpl->tpl_vars['decision_processids']->value; if (!is_array($_from) && !is_object($_from)) { settype($_from, 'array');}
foreach ($_from as $_smarty_tpl->tpl_vars['decision_processid']->key => $_smarty_tpl->tpl_vars['decision_processid']->value){
$_smarty_tpl->tpl_vars['decision_processid']->_loop = true;
?><?php if ($_smarty_tpl->tpl_vars['decision_processid']->value>0){?><?php $_smarty_tpl->tpl_vars['pname'] = new Smarty_variable($_smarty_tpl->tpl_vars['PROCESS_MASTER_DATA']->value['process_list'][$_smarty_tpl->tpl_vars['decision_processid']->value]['description'], null, 0);?><?php if ($_smarty_tpl->tpl_vars['ps']->value==1||$_smarty_tpl->tpl_vars['ps']->value==3){?><button class='btn btn-warning btn-xs clsDecisionChose' data-unitprocessid='<?php echo $_smarty_tpl->tpl_vars['pid']->value;?>
' data-nextunitprocess="<?php echo $_smarty_tpl->tpl_vars['decision_processid']->value;?>
"  type='button' data-assignedto=<?php echo $_smarty_tpl->tpl_vars['pdata']->value['assignedto'];?>
 ><?php echo $_smarty_tpl->tpl_vars['pname']->value;?>
</button>&nbsp;<?php }?><?php }?><?php } ?><?php }elseif($_smarty_tpl->tpl_vars['pdata']->value['blocktype']==5){?><?php if ($_smarty_tpl->tpl_vars['ps']->value==1||$_smarty_tpl->tpl_vars['ps']->value==3){?><?php if ($_smarty_tpl->tpl_vars['roleid']->value==$_smarty_tpl->tpl_vars['PROCESS_MASTER_DATA']->value['supervisor_roleid']){?><button class='btn btn-warning btn-xs endprocess' data-unitprocessid='<?php echo $_smarty_tpl->tpl_vars['pid']->value;?>
' data-name='<?php echo $_smarty_tpl->tpl_vars['pdata']->value['description'];?>
' type='button' data-nextprocess="<?php echo $_smarty_tpl->tpl_vars['pdata']->value['next_process'];?>
" data-assignedto=<?php echo $_smarty_tpl->tpl_vars['pdata']->value['assignedto'];?>
 >Approve ?</button><?php }else{ ?><p class="label label-warning">Waiting for Supervisor Approval..</p><?php }?><?php }?><?php }elseif($_smarty_tpl->tpl_vars['pdata']->value['blocktype']==6){?><?php if ($_smarty_tpl->tpl_vars['ps']->value==1||$_smarty_tpl->tpl_vars['ps']->value==3){?><div id='idDivNextBnFotTimer'><!--<button class='btn btn-warning btn-xs endprocess' data-unitprocessid='<?php echo $_smarty_tpl->tpl_vars['pid']->value;?>
' data-name='<?php echo $_smarty_tpl->tpl_vars['pdata']->value['description'];?>
' type='button'   data-nextprocess="<?php echo $_smarty_tpl->tpl_vars['pdata']->value['next_process'];?>
"><?php if ($_smarty_tpl->tpl_vars['pdata']->value['next_process']=='0'){?>Finish<?php }else{ ?>Next<?php }?></button>--><button class='btn btn-success btn-xs btnClsDecision' data-unitprocessid='<?php echo $_smarty_tpl->tpl_vars['pid']->value;?>
' data-name='<?php echo $_smarty_tpl->tpl_vars['pdata']->value['description'];?>
' type='button' data-postprocess="<?php echo $_smarty_tpl->tpl_vars['pdata']->value['next_process'];?>
" data-assignedto=<?php echo $_smarty_tpl->tpl_vars['pdata']->value['assignedto'];?>
 data-decision='yes'>Yes</button><button class='btn btn-warning btn-xs btnClsDecisionNo' type='button'   data-decision='no' data-unitprocessid='<?php echo $_smarty_tpl->tpl_vars['pid']->value;?>
' data-name='<?php echo $_smarty_tpl->tpl_vars['pdata']->value['description'];?>
' data-assignedto=<?php echo $_smarty_tpl->tpl_vars['pdata']->value['assignedto'];?>
 >No</button></div><?php }?><?php if ($_smarty_tpl->tpl_vars['ps']->value==2){?><?php if ($_smarty_tpl->tpl_vars['PROCESS_MASTER_DATA']->value['process_destails']['operating_mode']=='Relaxed'){?>&nbsp;<button class='btn btn-danger  btn-xs updateProcessData' type='button'   data-unitprocessid='<?php echo $_smarty_tpl->tpl_vars['pid']->value;?>
' data-name='<?php echo $_smarty_tpl->tpl_vars['pdata']->value['description'];?>
' data-assignedto=<?php echo $_smarty_tpl->tpl_vars['pdata']->value['assignedto'];?>
  >Update</button><?php }?><?php }?><?php }else{ ?><?php if ($_smarty_tpl->tpl_vars['ps']->value==1||$_smarty_tpl->tpl_vars['ps']->value==3){?><button data-nextprocess="<?php echo $_smarty_tpl->tpl_vars['pdata']->value['next_process'];?>
" class='btn btn-warning btn-xs endprocess' data-unitprocessid='<?php echo $_smarty_tpl->tpl_vars['pid']->value;?>
' data-name='<?php echo $_smarty_tpl->tpl_vars['pdata']->value['description'];?>
' type='button' data-assignedto=<?php echo $_smarty_tpl->tpl_vars['pdata']->value['assignedto'];?>
 data-lmd = '<?php echo $_smarty_tpl->tpl_vars['pdata']->value['learnermodedetails'];?>
' ><?php if ($_smarty_tpl->tpl_vars['pdata']->value['next_process']=='0'){?>Finish<?php }else{ ?>Next<?php }?></button><?php }?><?php if ($_smarty_tpl->tpl_vars['ps']->value==2){?><?php if ($_smarty_tpl->tpl_vars['PROCESS_MASTER_DATA']->value['process_destails']['operating_mode']=='Relaxed'){?>&nbsp;<button class='btn btn-danger  btn-xs updateProcessData' type='button'   data-assignedto=<?php echo $_smarty_tpl->tpl_vars['pdata']->value['assignedto'];?>
 data-unitprocessid='<?php echo $_smarty_tpl->tpl_vars['pid']->value;?>
' data-name='<?php echo $_smarty_tpl->tpl_vars['pdata']->value['description'];?>
' >Update</button><?php }?><?php }?><?php if ($_smarty_tpl->tpl_vars['pdata']->value['blocktype']==3){?><?php if ($_smarty_tpl->tpl_vars['PROCESS_MASTER_DATA']->value['pf_documents'][$_smarty_tpl->tpl_vars['pid']->value]['documentid']){?>files<a href="index.php?module=Documents&view=Detail&record=<?php echo $_smarty_tpl->tpl_vars['PROCESS_MASTER_DATA']->value['pf_documents'][$_smarty_tpl->tpl_vars['pid']->value]['documentid'];?>
" target="_blank"><i class="icon-file"></i></a><?php }?><?php }?><?php }?><?php $_smarty_tpl->tpl_vars['customform'] = new Smarty_variable($_smarty_tpl->tpl_vars['pdata']->value['customform'], null, 0);?><?php if ($_smarty_tpl->tpl_vars['pdata']->value['customform']!=''){?><script>var x = <?php echo html_entity_decode($_smarty_tpl->tpl_vars['customform']->value);?>
;var id = <?php echo $_smarty_tpl->tpl_vars['pid']->value;?>
;if (x != '' || x != '[]'){  formdata[id]= x;     }</script><?php }?><?php if ($_smarty_tpl->tpl_vars['process_instance_data']->value['unit_instance_data']!=''){?><?php $_smarty_tpl->tpl_vars['unit_instance_data'] = new Smarty_variable($_smarty_tpl->tpl_vars['process_instance_data']->value['unit_instance_data'], null, 0);?><script>var y = <?php echo html_entity_decode($_smarty_tpl->tpl_vars['unit_instance_data']->value);?>
;var pid = <?php echo $_smarty_tpl->tpl_vars['pid']->value;?>
;if (y != ''){  formdatavalues[pid]= y; }</script><?php }?><?php }?></td><td width="" class="span3" id=""><div class="commentspanel"><h3>Comments</h3><hr><div><textarea placeholder="Add Comment here" id="comment<?php echo $_smarty_tpl->tpl_vars['pid']->value;?>
"></textarea><br><button type="button" data-unitprocessid="<?php echo $_smarty_tpl->tpl_vars['pid']->value;?>
" data-userid="<?php echo $_smarty_tpl->tpl_vars['userid']->value;?>
" name="savecomment" id="savecomment" class="btn btn-success savecomment">Post</button></div><div class='commentsdiv' style="max-height:300px;overflow: auto;"><?php  $_smarty_tpl->tpl_vars['cdata'] = new Smarty_Variable; $_smarty_tpl->tpl_vars['cdata']->_loop = false;
 $_smarty_tpl->tpl_vars['index'] = new Smarty_Variable;
 $_from = $_smarty_tpl->tpl_vars['PROCESSFLOW_MODEL']->value->getProcessFlowComments($_smarty_tpl->tpl_vars['pid']->value,$_smarty_tpl->tpl_vars['RECORD_ID']->value); if (!is_array($_from) && !is_object($_from)) { settype($_from, 'array');}
foreach ($_from as $_smarty_tpl->tpl_vars['cdata']->key => $_smarty_tpl->tpl_vars['cdata']->value){
$_smarty_tpl->tpl_vars['cdata']->_loop = true;
 $_smarty_tpl->tpl_vars['index']->value = $_smarty_tpl->tpl_vars['cdata']->key;
?><div class="commentscontainer <?php if ($_smarty_tpl->tpl_vars['userid']->value!=$_smarty_tpl->tpl_vars['cdata']->value['id']){?>darker<?php }?>"><h4><?php echo $_smarty_tpl->tpl_vars['cdata']->value['user_name'];?>
</h4><img src="<?php if ($_smarty_tpl->tpl_vars['cdata']->value['imagename']!=''){?><?php echo $_smarty_tpl->tpl_vars['cdata']->value['imagepath'];?>
<?php echo $_smarty_tpl->tpl_vars['cdata']->value['attachmentsid'];?>
_<?php echo $_smarty_tpl->tpl_vars['cdata']->value['imagename'];?>
<?php }else{ ?>layouts/vlayout/skins/images/DefaultUserIcon.png<?php }?>" alt="Avatar" class="<?php if ($_smarty_tpl->tpl_vars['userid']->value!=$_smarty_tpl->tpl_vars['cdata']->value['id']){?>right<?php }?>"><p><?php echo $_smarty_tpl->tpl_vars['cdata']->value['comments'];?>
</p><span class="time-<?php if ($_smarty_tpl->tpl_vars['userid']->value!=$_smarty_tpl->tpl_vars['cdata']->value['id']){?>left<?php }else{ ?>right<?php }?>"><?php echo date("H:i",$_smarty_tpl->tpl_vars['cdata']->value['date_time']);?>
</span></div><?php } ?></div></div></td></tr></table></div></div></div><?php } ?></div></div><script src="libraries/jquery/jquery.dform-1.1.0.min.js" ></script><script type="text/javascript" src="libraries/bootstrap/js/bootbox.min.js"></script><script>jQuery(document).ready(function(){var recordId = jQuery('input[name="record"]').val();/*change Assignee */jQuery('.clsSelAssgnee').change(function(){var sentdata ={};sentdata.module ='ProcessFlow';sentdata.action = 'AjaxProcessFlow';sentdata.mode = 'changeAssigneeUser';sentdata.unitprocessid = jQuery(this).data('unitprocessid');sentdata.recordId = recordId;sentdata.assignee_user_id = jQuery(this).find(':selected').data('user');AppConnector.request(sentdata).then(function(data){if(data.success == true){var params = {title : app.vtranslate('JS_MESSAGE'),text: app.vtranslate(data.result.message),animation: 'show',type: 'info'};Vtiger_Helper_Js.showPnotify(params);}else{this.disabled = false;bootbox.alert("Try again");}});});jQuery('.savecomment').click(function(){var pid = jQuery(this).data("unitprocessid");var userid = jQuery(this).data("userid");var comment = jQuery("#comment"+pid).val();if(comment == ""){return false;}var commentdata ={};commentdata.module ='ProcessFlow';commentdata.action = 'AjaxProcessFlow';commentdata.mode = 'addCommentProcessFlow';commentdata.unitprocessid = pid;commentdata.userid = userid;commentdata.recordId = recordId;commentdata.comment = comment;AppConnector.request(commentdata).then(function(responcedata){if(responcedata.success == true){var params = {title : app.vtranslate('JS_MESSAGE'),text: app.vtranslate(responcedata.result.message),animation: 'show',type: 'info'};Vtiger_Helper_Js.showPnotify(params);jQuery(this).prop('disabled', true);ajaxReload(recordId);}else{this.disabled = false;bootbox.alert("Try again");}});});jQuery('.clsDecisionChose').click(function(){var sentdata ={};sentdata.module ='ProcessFlow';sentdata.action = 'AjaxProcessFlow';sentdata.mode = 'decisionChose';sentdata.unitprocessid = jQuery(this).data('unitprocessid');sentdata.nextunitprocess = jQuery(this).data('nextunitprocess');sentdata.recordId = recordId;sentdata.process_master_id = jQuery('#idHdnProcessmasterid').val();AppConnector.request(sentdata).then(function(data){if(data.success == true){var params = {title : app.vtranslate('JS_MESSAGE'),text: app.vtranslate(data.result.message),animation: 'show',type: 'info'};Vtiger_Helper_Js.showPnotify(params);ajaxReload(recordId);}else{this.disabled = false;bootbox.alert("Try again");}});});jQuery('.btnClsBranching').click(function(){var sentdata ={};sentdata.module ='ProcessFlow';sentdata.action = 'AjaxProcessFlow';sentdata.mode = 'branch_process';sentdata.unitprocessid = jQuery(this).data('unitprocessid');sentdata.runningprocess = jQuery(this).data('runningprocess');sentdata.recordId =recordId;sentdata.branchids = jQuery(this).data('branchids');sentdata.process_master_id = jQuery('#idHdnProcessmasterid').val();AppConnector.request(sentdata).then(function(data){if(data.success == true){var params = {title : app.vtranslate('JS_MESSAGE'),text: app.vtranslate(data.result.message),animation: 'show',type: 'info'};Vtiger_Helper_Js.showPnotify(params);ajaxReload(recordId);}else{this.disabled = false;bootbox.alert("Try again");}});});jQuery('.btnClsDecisionNo').click(function(){var p_name = jQuery(this).data('name');var sentdata ={};sentdata.module ='ProcessFlow';sentdata.action = 'AjaxProcessFlow';sentdata.mode = 'decision_end_unit_process_no';sentdata.unitprocessid = jQuery(this).data('unitprocessid');sentdata.process_master_id = jQuery('#idHdnProcessmasterid').val();sentdata.recordId =  recordId;sentdata.decision = jQuery(this).data('decision');sentdata.postprocess = jQuery(this).data('postprocess');AppConnector.request(sentdata).then(function(data){if(data.result.success == true){var params = {title : app.vtranslate('JS_MESSAGE'),text: app.vtranslate('<b>'+p_name+'</b><br> Process running.'),animation: 'show',type: 'info'};Vtiger_Helper_Js.showPnotify(params);/* ajaxReload(recordId); */}else{this.disabled = false;bootbox.alert("Try again");}});});jQuery('.btnClsDecision').click(function(){var p_name = jQuery(this).data('name');var sentdata ={};sentdata.module ='ProcessFlow';sentdata.action = 'AjaxProcessFlow';sentdata.mode = 'decision_end_unit_process';sentdata.unitprocessid = jQuery(this).data('unitprocessid');sentdata.process_master_id = jQuery('#idHdnProcessmasterid').val();sentdata.recordId =  recordId;sentdata.decision = jQuery(this).data('decision');sentdata.postprocess = jQuery(this).data('postprocess');AppConnector.request(sentdata).then(function(data){if(data.result.success == true){var params = {title : app.vtranslate('JS_MESSAGE'),text: app.vtranslate('<b>'+p_name+'</b><br> Process Ended,Next Process Started.'),animation: 'show',type: 'info'};Vtiger_Helper_Js.showPnotify(params);ajaxReload(recordId);}else{this.disabled = false;bootbox.alert("Try again");}});});jQuery('.endprocess').click(function(e){var commentfiles = '';var recordId = jQuery('input[name="record"]').val();var p_name = jQuery(this).data('name');var lmd = jQuery(this).data('lmd');var nextprocess = jQuery(this).data('nextprocess');var unitprocessid = jQuery(this).data('unitprocessid');var formid = jQuery('#myform'+unitprocessid);var formdata  = formid.serializeArray();var fdata = {};var sentdata = new FormData(formid[0]);sentdata.append('module', 'ProcessFlow');sentdata.append('action', 'AjaxProcessFlow');sentdata.append('mode', 'end_unit_process');sentdata.append('unitprocessid', unitprocessid);sentdata.append('process_master_id', jQuery('#idHdnProcessmasterid').val());sentdata.append('recordId', recordId);sentdata.append('nextprocess', nextprocess);sentdata.append('formdata',JSON.stringify(formdata));this.disabled = true;nextUnitProcess(sentdata,p_name);/* if(formdata.length > 0){jQuery.each(formdata,function(fkey,fvalue) {fdata[fvalue.name] = fvalue.value;var fname = fvalue.name;});sentdata.append('formdata',JSON.stringify(fdata));nextUnitProcess(sentdata,p_name);}else{sentdata.append('formdata',JSON.stringify(formdata));this.disabled = true;nextUnitProcess(sentdata,p_name);}	 *//* if(fname.indexOf('product_') != -1){var fnames_split_array = fname.split("_");var pid = fnames_split_array[1];var qty = fvalue.value;/* check stock in Inventoryvar pdata ={};pdata.module ='ProcessFlow';pdata.action = 'AjaxValidations';pdata.mode = 'check_inventory';pdata.productid = pid;pdata.product_quantity = qty;deferreds.push( AppConnector.request(pdata).then(function(data){if(data.success == true){if(data.result.status == false){var params = {title : app.vtranslate('JS_MESSAGE'),text: app.vtranslate(data.result.message),animation: 'show',type: 'danger'};Vtiger_Helper_Js.showPnotify(params);jQuery('input[name="'+ fname +'"]').css('border-color', 'red');var error_product_status = true;}}else{bootbox.alert("Try again");}}));}else{/* if form data dont have product fieldserror_product_status = false;}*/});jQuery('.updateProcessData').click(function(){var p_name = jQuery(this).data('name');var unitprocessid = jQuery(this).data('unitprocessid');var formid = jQuery('#myform'+unitprocessid);var formdata  = formid.serializeArray();this.disabled = true;var sentdata ={};sentdata.module ='ProcessFlow';sentdata.action = 'AjaxProcessFlow';sentdata.mode = 'updateProcessData';sentdata.unitprocessid = unitprocessid;sentdata.process_master_id = jQuery('#idHdnProcessmasterid').val();sentdata.recordId = recordId;sentdata.formdata = formdata;AppConnector.request(sentdata).then(function(data){if(data.result.success == true){var params = {title : app.vtranslate('JS_MESSAGE'),text: app.vtranslate('<b> Updated Values </b>'),animation: 'show',type: 'info'};Vtiger_Helper_Js.showPnotify(params);}else{this.disabled = false;bootbox.alert("Try again");}});});jQuery('.btnAbort').click(function(){bootbox.confirm("Are you sure you want Abort Batch", function(result){if(result){this.disabled = true;var sentdata ={};sentdata.module ='ProcessFlow';sentdata.action = 'AjaxProcessFlow';sentdata.mode = 'abort_batch';sentdata.recordId = recordId;abortBatch(sentdata);}else{this.disabled = false;}});});if(recordId > 0){count ++;console.log(formdata);jQuery.each(formdata, function( index, value ) {/* temp need to enable  */jQuery("#myform"+index).dform(value);});if(Object.keys(formdatavalues).length  > 0 ){jQuery.each(formdatavalues, function( index, value ) {if('quantity_data' in value && Object.keys(value.quantity_data).length  > 0 ){jQuery.each(value.quantity_data, function(k,v){if(jQuery("input[name='"+v.name+"']").is(':checkbox')){jQuery("input[name='"+v.name+"']").val(v.value);if(v == 'on'){jQuery("input[name='"+v.name+"']").prop('checked', true);}else{jQuery("input[name='"+v.name+"']").prop('checked', false);}}else{jQuery("input[name='"+v.name+"']").val(v.value);}});}var productid = value.productid;var unitprocessid = value.unitprocessid;if(productid != ''){jQuery('#idProduct_'+unitprocessid).val(productid);jQuery('#idProduct_'+unitprocessid).trigger("chosen:updated");}});}}/*show / hide learner mode div*/var learner_mode = jQuery('#idHdnHelpDetails').val();if(learner_mode == 1){}else{jQuery('.clsPLrnMode').html('');}/* Set the date we're counting down to */var starttime = jQuery('#idHdnCurrentTime').val();var endtime = jQuery('#idHdnCurrentProcessEndTime').val();var pid = jQuery('#idHdnCurrentProcessId').val();var countDownDate = new Date(endtime).getTime();var process_status_end = false;/* Update the count down every 1 second */var x = setInterval(function() {/* Get todays date and timen */var now = new Date().getTime();/* Find the distance between now an the count down date*/var distance = countDownDate - now;/* Time calculations for days, hours, minutes and seconds */var days = Math.floor(distance / (1000 * 60 * 60 * 24));var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));var seconds = Math.floor((distance % (1000 * 60)) / 1000);/* Output the result in an element with id="demo"*/var rTimeHtml = '';if(days > 0){ rTimeHtml += days + "d ";}if(hours > 0){ rTimeHtml += hours + "h ";}if(minutes > 0){ rTimeHtml += minutes + "m ";}if(seconds > 0){ rTimeHtml += seconds + "s ";}jQuery('#idHdnCurrentProcessRemainingTime').html(rTimeHtml);/* If the count down is over, write some text */if(process_status_end == false && distance < 50){jQuery('#idHdnCurrentProcessRemainingTime').removeClass('label-default');jQuery('#idMedia_'+pid).addClass('label-important');jQuery('#idMedia_'+pid).addClass('blink_me');jQuery('#idHdnCurrentProcessRemainingTime').addClass('blink_me');jQuery('#idHdnCurrentProcessRemainingTime').addClass('label-important');process_status_end = true;}if (distance < 1) {jQuery("#idDivNextBnFotTimer").show();clearInterval(x);jQuery('#ee').html("EXPIRED");/* jQuery('#callerTone').trigger('play');*/if(jQuery('#idHdnSoundNotifications').val() == 1){jQuery('#msgTone').trigger('play');}}}, 1000);/* Left widget */if(recordId > 0){var TotalTaskCompleted = jQuery('#idHdnTotalTaskCompleted').val();var TotalTaskNotCompleted = jQuery('#idHdnTotalTaskNotCompleted').val();var ElapsedTime = jQuery('#idHdnElapsedTime').val();var CurrentTask = jQuery('#idHdnCurrentTask').val();var TotalTasks = jQuery('#idHdnTotalTasks').val();var TotalWaitingTasks = jQuery('#idHdnTotalWaitingTasks').val();var process_status = jQuery('[name="pf_process_status"]').chosen().val();if(process_status == "Completed" || process_status == "Destructed"){/* var done = '<a class="cancelLink" type="reset" onclick="javascript:window.history.back();"><?php echo vtranslate("LBL_CANCEL",$_smarty_tpl->tpl_vars['MODULE']->value);?>
</a>';var save = '<a class="cancelLink" type="reset" onclick="javascript:window.history.back();"><?php echo vtranslate("LBL_CANCEL",$_smarty_tpl->tpl_vars['MODULE']->value);?>
</a>';*/jQuery('#idSpnLeftBtnContainer').html('<a class="cancelLink" type="reset" onclick="javascript:window.history.back();"><?php echo vtranslate("LBL_CANCEL",$_smarty_tpl->tpl_vars['MODULE']->value);?>
</a>');}else{/* var done = '<button class="btn btn-success btnDone" type="button">Done</strong></button><a class="cancelLink" type="reset" onclick="javascript:window.history.back();"><?php echo vtranslate("LBL_CANCEL",$_smarty_tpl->tpl_vars['MODULE']->value);?>
</a>';var save = '<button class="btn btn-success" type="submit"><strong><?php echo vtranslate("LBL_SAVE",$_smarty_tpl->tpl_vars['MODULE']->value);?>
</strong></button><a class="cancelLink" type="reset" onclick="javascript:window.history.back();"><?php echo vtranslate("LBL_CANCEL",$_smarty_tpl->tpl_vars['MODULE']->value);?>
</a>'; */jQuery('#idSpnLeftBtnContainer').html('<button class="btn btn-success" type="submit"><strong><?php echo vtranslate("LBL_SAVE",$_smarty_tpl->tpl_vars['MODULE']->value);?>
</strong></button><a class="cancelLink" type="reset" onclick="javascript:window.history.back();"><?php echo vtranslate("LBL_CANCEL",$_smarty_tpl->tpl_vars['MODULE']->value);?>
</a>');}/*if(TotalTaskNotCompleted == 0 && (TotalTasks == TotalTaskCompleted)){jQuery('#idSpnLeftBtnContainer').html(done);}else{jQuery('#idSpnLeftBtnContainer').html(save);}*//*end*/var widget ='<div class="quickWidget">'+'   <div class="accordion-heading accordion-toggle quickWidgetHeader" data-target="#processflow_custom" data-toggle="collapse" data-parent="#quickWidgets" data-label="Process Flow Widget"  >'+'      <span class="pull-left"><img class="imageElement" data-rightimage="layouts/vlayout/skins/images/rightArrowWhite.png" data-downimage="layouts/vlayout/skins/images/downArrowWhite.png" src="layouts/vlayout/skins/images/downArrowWhite.png"></span>					'+'      <h5 class="title widgetTextOverflowEllipsis pull-right" title="Process Flow Widget">Process Flow Widget</h5>'+'      <div class="loadingImg hide pull-right">'+'         <div class="loadingWidgetMsg"><strong>Loading Widget</strong></div>'+'      </div>'+'      <div class="clearfix"></div>'+'   </div>'+'   <div class="widgetContainer accordion-body collapse in" id="processflow_custom"   style="height: auto;">'+'      <div class="recordNamesList">'+'         <div class="row-fluid">'+'            <div class="">'+'               <ul class="nav nav-list">';if(TotalTasks == TotalTaskCompleted ){}else{widget +='                  <li><a>Current Task <span style="font-weight: bold;">'+CurrentTask+'</span> of <span  style="font-weight: bold;">'+TotalTasks+'</span></a></li>';}widget +='                  <li><a>Tasks completed : <span style="font-weight: bold;">'+TotalTaskCompleted+'</span></a></li>'+'                  <li><a>Not completed : <span style="font-weight: bold;">'+TotalTaskNotCompleted+'</span></a></li>'+'                  <li><a>Tasks Waiting :<span style="font-weight: bold;">'+TotalWaitingTasks+'</span></a></li>'+'                  <li><a>Elapsed Time (H:M:S)<br><span style="font-weight: bold;">'+ElapsedTime+'</span></a></li>'+'                  <!--<button class="btn btn-info btn-xs"  >Hide Completed</button>-->'+'                   <!--<button class="btn btn-info btn-xs"  >Hide Unstarted</button>-->'+'               </ul>'+'            </div>'+'         </div>'+'      </div>'+'   </div>'+'</div>';jQuery('.quickWidgetContainer').html(widget);}/* End Left widget */jQuery('.btnDone').attr("disabled", "disabled");jQuery("#idDivNextBnFotTimer").hide();var abortBatchstatus = jQuery("#idHdnTerminationStatus").val();if(abortBatchstatus == 'Aborted'){jQuery('button').prop('disabled', true);}});function abortBatch(sentdata){var recordId = jQuery('input[name="record"]').val();AppConnector.request(sentdata).then(function(data){if(data.result.success == true){var params = {title : app.vtranslate('JS_MESSAGE'),text: app.vtranslate('Abort Batch'),animation: 'show',type: 'info'};Vtiger_Helper_Js.showPnotify(params);ajaxReload(recordId);}else{this.disabled = false;bootbox.alert("Try again");}});}function nextUnitProcess(sentdata,p_name){var params = {url: "index.php",type: "POST",data: sentdata,processData: false,contentType: false};var recordId = jQuery('input[name="record"]').val();AppConnector.request(params).then(function(data){console.log('data');console.log(data);if(data.result.success == true){var params = {title : app.vtranslate('JS_MESSAGE'),text: app.vtranslate('<b>'+p_name+'</b><br> Process Ended,Next Process Started.'),animation: 'show',type: 'info'};Vtiger_Helper_Js.showPnotify(params);ajaxReload(recordId);}else{this.disabled = false;var params = {title : app.vtranslate('JS_MESSAGE'),text: app.vtranslate(data.result.message),animation: 'show',type: 'danger'};Vtiger_Helper_Js.showPnotify(params);bootbox.alert(data.result.message);}});}function ajaxReload(recordId){var sentdata ={};sentdata.module ='ProcessFlow';sentdata.view = 'AjaxProcesses';sentdata.recordId = recordId;AppConnector.request(sentdata).then(function(data){jQuery('#idProceessData').html(data);});}function numberValidation(event){var keycode = event.which;if (!(event.shiftKey == false && (keycode == 46 || keycode == 8 || keycode == 37 || keycode == 39 || (keycode >= 48 && keycode <= 57)))) {event.preventDefault();}}</script>
<?php }} ?>