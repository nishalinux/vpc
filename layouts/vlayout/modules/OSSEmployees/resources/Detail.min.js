
Vtiger_Detail_Js("OSSEmployees_Detail_Js",{employeeHierarchyResponseCache:{},triggerEmployeeHierarchy:function(a){OSSEmployees_Detail_Js.getEmployeeHierarchyResponseData(a).then(function(b){OSSEmployees_Detail_Js.displayEmployeeHierarchyResponseData(b)})},getEmployeeHierarchyResponseData:function(b){var a=jQuery.Deferred();if(!(jQuery.isEmptyObject(OSSEmployees_Detail_Js.employeeHierarchyResponseCache))){a.resolve(OSSEmployees_Detail_Js.employeeHierarchyResponseCache)}else{AppConnector.request(b).then(function(c){OSSEmployees_Detail_Js.employeeHierarchyResponseCache=c;a.resolve(OSSEmployees_Detail_Js.employeeHierarchyResponseCache)})}return a.promise()},displayEmployeeHierarchyResponseData:function(b){var a=function(c){app.showScrollBar(jQuery("#hierarchyScroll"),{height:"200px",railVisible:true,alwaysVisible:true,size:"6px"})};app.showModalWindow(b,function(c){if(typeof a=="function"){a(c)}})}},{registerHoliday:function(a){var b=this;jQuery('select[name="year"]').change(function(){var c=jQuery(this).val();var e=jQuery("input#recordId").val();var d={};d.data={module:"OSSEmployees",action:"GetHoliday",year:c,id:e};d.async=false;d.dataType="json";AppConnector.request(d).then(function(h){var f=h.result;if(f.success){var g=f.holiday;jQuery("span#workDay").html("<strong>"+g.workDay+"</strong>");jQuery("span#annual_holiday_entitlement").html("<strong>"+g.entitlement+"</strong>")}else{var i={text:app.vtranslate("message"),animation:"show",type:"error",sticker:false,hover_sticker:false,};Vtiger_Helper_Js.showPnotify(i)}},function(h,f){var g={text:app.vtranslate("JS_ERROR_CONNECTING"),type:"error"};Vtiger_Helper_Js.showPnotify(g)})})},registerEvents:function(){this._super();this.registerHoliday()}});